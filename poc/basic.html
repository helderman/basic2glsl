<!DOCTYPE html>
<meta charset="utf-8" />
<title>BASIC on the GPU</title>
<link rel="stylesheet" href="basic.css" />

<div>
<p>
<button onclick="loadBasic('tll');">12LL</button>
<button onclick="loadBasic('ericbrot');">EricBrot</button>
&nbsp;
<button accesskey="T" onclick="trans();">Translate</button>
<button accesskey="X" onclick="trans();run();">Translate + Run</button>
</p>
<h2>BASIC</h2>
<textarea id="basic" cols="80" rows="25"></textarea>
</div>

<div>
<p>
<button accesskey="R" onclick="run();">Run</button>
</p>
<h2>GLSL</h2>
<textarea id="shader" cols="60" rows="25"></textarea>
</div>

<div>
<p>
<button accesskey="0" onclick="resetClock();">Reset</button>
<button accesskey="P" onclick="pauseClock();">Pause</button>
</p>
<h2 id="clock"></h2>
<canvas id="canvas" class="glsl-canvas" width="400" height="400"></canvas>
</div>

<script src="https://unpkg.com/glsl-canvas-js/dist/umd/glsl-canvas.min.js"></script>
<script src="basic.js"></script>

<script type="text/plain" id="boilerplate1">// Shader boilerplate ------------------------------------------
#ifdef GL_ES
precision mediump float;
#endif

uniform vec2 u_resolution;
uniform float u_time;
uniform sampler2D u_buffer0;

float DisplayWidth = u_resolution.x, DisplayHeight = u_resolution.y;
const float w_iterations = 500.;
vec4 w_color = vec4(1);
float w_seed = 0.;

float w_trunc(float x) { return x > 0. ? floor(x) : ceil(x); }
float w_angle(float a) { return mod(a, 6.2831853); }
float w_sin(float a) { return sin(w_angle(a)); }
float w_cos(float a) { return cos(w_angle(a)); }
float w_tan(float a) { return tan(w_angle(a)); }

float sdSegment(vec2 p, vec2 a, vec2 b) { vec2 pa = p-a, ba = b-a; return length(pa - ba * clamp(dot(pa,ba)/dot(ba,ba), 0., 1.)); }
bool w_line(float x1, float y1, float x2, float y2) { return sdSegment(gl_FragCoord.xy, vec2(x1, y1), vec2(x2, y2)) <= .5; }
float w_random(float x, float y) { return fract(w_sin(dot(vec2(x, y), vec2(12.9898, 12.1414))) * 83758.5453); }
float w_for_chaosgame(float from, float to) { return from + floor((to - from + 1.) * w_random(u_time, w_seed++)); }
float w_for_ericbrot(float from, float to) { vec2 c = gl_FragCoord.xy + .5*u_resolution; return to == u_resolution.x - 1. ? c.x : c.y; }
float w_for(float from, float to) { return u_time < .1 ? w_for_ericbrot(from, to) : w_for_chaosgame(from, to); }

void main() {
gl_FragColor = texture2D(u_buffer0, gl_FragCoord.xy / u_resolution, 0.0);
gl_FragColor.a = 1.0;
#ifdef BUFFER_0
for (float w_iteration = 0.; w_iteration < w_iterations; w_iteration++) {
// End of boilerplate --------------------------------------------
</script>

<script type="text/plain" id="tll">' --- Twelve Little Lions ---
nomainwin
WindowWidth=400
WindowHeight=400

open ProgName$ for graphics_nsb_nf as #w
#w "trapclose Quit"
#w "down"
#w "cls"

deg2rad = atn(1) / 45
linelen = WindowHeight / 100
x1 = WindowWidth / 2
y1 = WindowHeight / 7
a = 0

For i = 1 To 2160
    x2 = x1 + linelen * cos(a)
    y2 = y1 + linelen * sin(a)
    a = a + (i*i + 358) * deg2rad
    #w "Line "; x1; " "; y1; " "; x2; " "; y2
    x1 = x2
    y1 = y2
Next i

#w "flush"
wait

'sub Quit handle$
    #w "discard"
    close #w
    end
'end sub

</script>

<script type="text/plain" id="ericbrot">' --- EricBrot ---
' see : https://qb64phoenix.com/forum/showthread.php?tid=3735
' Reference Aurel found this and it is pretty cool 2025-06-05 2025 I share with QB64pe
ProgName$="Schraf Brot (per Aurel 2025-06-05)"
    'Modified for LB by keesb, 2025-06-13

w = 400
h = 400
    zoom = 4 / w   ' was 2/w
dmin = 0.06

    nomainwin
    WindowWidth=400
    WindowHeight=400
    UpperLeftX=(DisplayWidth-WindowWidth)/2
    UpperLeftY=(DisplayHeight-WindowHeight)/2

    open ProgName$ for graphics_nsb_nf as #w
    #w "trapclose Quit"
    #w "down"
    #w "cls"
    #w "place 20 20"
    #w "\Please wait 10-20 sec before drawing starts... "
    #w "\Please wait 75-85 sec before drawing ends... "

    FirstTime=1 'True

For a = 0 To w - 1
    For b = 0 To 1.5 * h
        x = (a - w) * zoom
        y = (b - h) * zoom
        i = 0
        d = 100
        Do
            u = x * x
            v = y * y
            If u + v > 4.8 Or i > 30 Or d < dmin Then
                Exit Do
            End If
            t = u - v
            y = 2 * x * y + 0.156
            x = t - 0.8
            i = i + 1
            n = Abs(u + v - 1)
            If n < d Then d = n
        Loop until 0 'False
        If d < dmin Then
            coul = 255 - Int(4000 * d)
            If coul < 0 Then coul = 0
            If coul > 255 Then coul = 255
            x1 = a - w / 2
            y1 = b - h / 2
            x2 = w + w / 2 - 1 - a
            y2 = h + h / 2 - b

            ' you can choose one of the following colormaps :
            #w "color "; coul; " "; coul; " "; 0           ' original colors, actually black to yellow
            '#w "color "; Autumn256$(coul)
            '#w "color "; Bone256$(coul)
            '#w "color "; "0 " + co
            '#w "color "; Gray256$(coul)
            '#w "color "; Hot256$(coul)
            '#w "color "; Pink256$(coul)
            '#w "color "; Turbo256$(coul)

            if FirstTime then
                #w "fill black"
                FirstTime=0 'False
            end if
            #w "Line "; x1; " "; y1; " "; x1 + 1; " "; y1 + 1
            #w "Line "; x2; " "; y2; " "; x2 + 1; " "; y2 + 1
        End If
        scan
    Next b
Next a

    #w "flush"

    wait

' end of EricBrot
</script>
